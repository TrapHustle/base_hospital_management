<?xml version="1.0" encoding="utf-8"?>
<templates xml:space="preserve">

<t t-name="PharmacyDashboard">
    <div class="pf-dashboard">
        
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <div class="logo-mark">Pf</div>
                <span class="logo-text">PharmaFlow</span>
            </div>
            <nav class="sidebar-nav">
                <a class="nav-item active" t-on-click="() => this.setMenu('home')">
                    <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="1" width="6" height="6"/><rect x="9" y="1" width="6" height="6"/><rect x="1" y="9" width="6" height="6"/><rect x="9" y="9" width="6" height="6"/></svg>
                    Tableau de bord
                    <span class="nav-arrow">‚Ä∫</span>
                </a>
                <a class="nav-item" t-on-click="() => this.setMenu('medicines')">
                    <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><circle cx="8" cy="6" r="3"/><path d="M2 14c0-3.3 2.7-6 6-6s6 2.7 6 6"/></svg>
                    M√©dicaments
                </a>
                <a class="nav-item" t-on-click="() => this.setMenu('vaccines')">
                    <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M8 1l2 5h5l-4 3 1.5 5L8 11l-4.5 3L5 9 1 6h5z"/></svg>
                    Vaccins
                </a>
                <a class="nav-item" t-on-click="() => this.setMenu('suppliers')">
                    <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M1 3h14v2H1zm1 3h12l-1 9H3z"/></svg>
                    Commandes Fournisseurs
                </a>
            </nav>
            <div class="sidebar-footer">
                <a class="nav-item" t-on-click="() => this.setMenu('settings')">
                    <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><circle cx="8" cy="8" r="3"/><path d="M8 1v2M8 13v2M1 8h2M13 8h2"/></svg>
                    Param√®tres
                </a>
                <a class="nav-item danger" t-on-click="logout">
                    <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M10 8H3m0 0l3-3M3 8l3 3M13 2v12"/></svg>
                    D√©connexion
                </a>
            </div>
        </aside>

        <!-- MAIN -->
        <main class="main">

            <!-- TOPBAR -->
            <header class="topbar">
                <div class="topbar-date">
                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="3" width="14" height="12" rx="0" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M5 1v4M11 1v4M1 7h14" stroke="currentColor" stroke-width="1.5"/></svg>
                    <span t-out="this.getCurrentDateFormatted()"/>
                </div>
                <div class="topbar-search">
                    <svg class="search-icon" width="13" height="13" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2"><circle cx="7" cy="7" r="5"/><path d="M11 11l3 3"/></svg>
                    <input type="text" placeholder="Rechercher..."/>
                </div>
                <div class="topbar-right">
                    <div class="notif-btn">
                        <svg width="15" height="15" viewBox="0 0 16 16" fill="currentColor"><path d="M8 1a5 5 0 00-5 5v3l-2 2v1h14v-1l-2-2V6a5 5 0 00-5-5zM6 13a2 2 0 004 0z"/></svg>
                        <span class="notif-badge" t-out="state.stock_alerts.out_of_stock_count + state.stock_alerts.low_stock_count"/>
                    </div>
                    <div class="user-chip">
                        <div class="user-avatar" t-out="user.name ? user.name.substring(0, 2).toUpperCase() : 'U'"/>
                        <div>
                            <div class="user-name" t-out="user.name or 'Utilisateur'"/>
                            <div class="user-role">Pharmacien Chef</div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="content">

                <!-- PAGE HEADER (HOME) -->
                <t t-if="state.menu === 'home'">
                    <div class="page-header">
                        <div>
                            <div class="page-title">Tableau de Bord</div>
                            <div class="page-subtitle">Bienvenue, <strong t-out="user.name or 'Pharmacien'"/>. Voici l'√©tat actuel de votre pharmacie.</div>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-outline">Rapports PDF</button>
                            <button class="btn btn-primary" t-on-click="() => this.setMenu('new_order')">+ Nouvelle Commande</button>
                        </div>
                    </div>

                    <!-- KPI GRID -->
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-top">
                                <div class="kpi-icon-box purple">
                                    <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor"><path d="M1 1h14v3H1zm1 4h12l-1 9H3z"/></svg>
                                </div>
                                <span class="kpi-trend up">+12.5%</span>
                            </div>
                            <div>
                                <div class="kpi-label">Entr√©es de stock ‚Äî Ce mois</div>
                                <div class="kpi-value" t-out="state.stats.total_medicines"/>
                            </div>
                            <div class="kpi-sub">
                                <div class="kpi-sub-item"><span class="kpi-sub-label">Articles</span><span class="kpi-sub-val">852</span></div>
                                <div class="kpi-sub-item"><span class="kpi-sub-label">Valeur</span><span class="kpi-sub-val">45 200 ‚Ç¨</span></div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-top">
                                <div class="kpi-icon-box teal">
                                    <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="5" width="14" height="9" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M5 5V3a3 3 0 016 0v2" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                                </div>
                                <span class="kpi-trend up">+5.2%</span>
                            </div>
                            <div>
                                <div class="kpi-label">Commandes Fournisseurs</div>
                                <div class="kpi-value">28</div>
                            </div>
                            <div class="kpi-sub">
                                <div class="kpi-sub-item"><span class="kpi-sub-label">En attente</span><span class="kpi-sub-val">12</span></div>
                                <div class="kpi-sub-item"><span class="kpi-sub-label">Re√ßues</span><span class="kpi-sub-val">16</span></div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-top">
                                <div class="kpi-icon-box green">
                                    <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor"><circle cx="8" cy="8" r="7" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M8 4v4l3 2" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                                </div>
                                <span class="kpi-trend up">+5.2%</span>
                            </div>
                            <div>
                                <div class="kpi-label">Ventes du Jour</div>
                                <div class="kpi-value">
                                    <span t-out="state.currency"/><span t-out="state.stats.revenue_today"/>
                                </div>
                            </div>
                            <div class="kpi-sub">
                                <div class="kpi-sub-item"><span class="kpi-sub-label">Transactions</span><span class="kpi-sub-val" t-out="state.stats.orders_today"/></div>
                                <div class="kpi-sub-item"><span class="kpi-sub-label">Panier moy.</span><span class="kpi-sub-val">24.30 ‚Ç¨</span></div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-top">
                                <div class="kpi-icon-box red">
                                    <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor"><path d="M8 1L1 14h14L8 1zm0 4v4m0 2v1"/><rect x="7.25" y="9" width="1.5" height="1.5" rx="0"/></svg>
                                </div>
                                <span class="kpi-trend down" t-out="'-' + (state.stock_alerts.out_of_stock_count + state.stock_alerts.low_stock_count)"/>
                            </div>
                            <div>
                                <div class="kpi-label">Produits en Alerte</div>
                                <div class="kpi-value" t-out="state.stock_alerts.out_of_stock_count + state.stock_alerts.low_stock_count"/>
                            </div>
                            <div class="kpi-sub">
                                <div class="kpi-sub-item"><span class="kpi-sub-label">Rupture</span><span class="kpi-sub-val" t-out="state.stock_alerts.out_of_stock_count"/></div>
                                <div class="kpi-sub-item"><span class="kpi-sub-label">Exp. proche</span><span class="kpi-sub-val" t-out="state.stock_alerts.expiring_count"/></div>
                            </div>
                        </div>
                    </div>

                    <!-- CHARTS GRID -->
                    <div class="dash-grid">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">√âvolution des Flux</div>
                                    <div class="card-subtitle">Entr√©es de stock vs ventes ‚Äî 7 derniers jours</div>
                                </div>
                                <button class="btn btn-outline" style="padding:5px 12px;font-size:12px;">Hebdomadaire</button>
                            </div>
                            <div class="card-body">
                                <div class="chart-wrap"><canvas id="fluxChart"/></div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">R√©partition du Stock</div>
                                    <div class="card-subtitle">Volume par cat√©gorie</div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="doughnut-wrap">
                                    <div class="doughnut-chart-wrap"><canvas id="stockChart"/></div>
                                    <div class="legend-list">
                                        <div class="legend-item">
                                            <span class="legend-label">
                                                <span class="legend-dot" style="background:#5C3D5E;"/>
                                                M√©dicaments Standard
                                            </span>
                                            <span class="legend-pct">75%</span>
                                        </div>
                                        <div class="legend-item">
                                            <span class="legend-label">
                                                <span class="legend-dot" style="background:#0D9E8A;"/>
                                                Vaccins
                                            </span>
                                            <span class="legend-pct">25%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- BOTTOM GRID: ALERTS & PRODUCTS -->
                    <div class="dash-grid-bottom">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">Alertes Critiques</div>
                                    <div class="card-subtitle">√âl√©ments n√©cessitant une attention imm√©diate</div>
                                </div>
                                <button class="card-action" t-on-click="() => this.setMenu('medicines')">Voir tout ‚Ä∫</button>
                            </div>
                            <div class="alert-list">
                                <t t-if="state.stock_alerts.out_of_stock.length > 0">
                                    <t t-foreach="state.stock_alerts.out_of_stock.slice(0, 2)" t-as="item" t-key="item.id">
                                        <div class="alert-item">
                                            <div class="alert-bar red"/>
                                            <div class="alert-icon-box" style="background:var(--red-pale);color:var(--red);">
                                                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M8 1L1 14h14L8 1zm0 5v4"/><circle cx="8" cy="12" r="0.8"/></svg>
                                            </div>
                                            <div class="alert-body">
                                                <div class="alert-text urgent"><t t-out="item.name"/> ‚Äî Rupture de stock imminente</div>
                                                <div class="alert-when">AUJOURD'HUI</div>
                                            </div>
                                        </div>
                                    </t>
                                </t>
                                <t t-if="state.stock_alerts.expiring_soon.length > 0">
                                    <t t-foreach="state.stock_alerts.expiring_soon.slice(0, 1)" t-as="item" t-key="item.id">
                                        <div class="alert-item">
                                            <div class="alert-bar orange"/>
                                            <div class="alert-icon-box" style="background:var(--orange-pale);color:var(--orange);">
                                                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><circle cx="8" cy="8" r="7" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M8 4v4l2.5 2.5" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                                            </div>
                                            <div class="alert-body">
                                                <div class="alert-text"><t t-out="item.name"/> ‚Äî Expire bient√¥t</div>
                                                <div class="alert-when">DANS 12J</div>
                                            </div>
                                        </div>
                                    </t>
                                </t>
                                <div class="alert-item">
                                    <div class="alert-bar muted"/>
                                    <div class="alert-icon-box" style="background:var(--surface);color:var(--muted);">
                                        <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><circle cx="8" cy="8" r="7" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M8 7v4M8 5v1" stroke="currentColor" stroke-width="1.5"/></svg>
                                    </div>
                                    <div class="alert-body">
                                        <div class="alert-text">Stock critique ‚Äî Article √† v√©rifier</div>
                                        <div class="alert-when">AUJOURD'HUI</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">Top Produits Command√©s</div>
                                    <div class="card-subtitle">Articles les plus sollicit√©s ce mois-ci</div>
                                </div>
                            </div>
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Produit</th>
                                        <th>Cat√©gorie</th>
                                        <th>Stock</th>
                                        <th>Commandes</th>
                                        <th/>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="state.product_lst.slice(0, 5)" t-as="prod" t-key="prod.id">
                                        <tr>
                                            <td><span class="prod-name" t-out="prod.name.substring(0, 20)"/></td>
                                            <td><span class="cat-badge">M√©dicament</span></td>
                                            <td><span class="mono" t-out="(prod.qty_available or 0).toFixed(0)"/></td>
                                            <td><span class="mono">120</span></td>
                                            <td><button class="row-action">¬∑¬∑¬∑</button></td>
                                        </tr>
                                    </t>
                                    <t t-if="state.product_lst.length === 0">
                                        <tr>
                                            <td colspan="5" style="text-align:center;padding:20px;color:var(--muted);">Aucun produit disponible</td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="footer-bar">
                        <span class="status-live"><span class="live-dot"/> Serveur Op√©rationnel</span>
                        <span>Support Technique</span>
                        <span>Confidentialit√©</span>
                        <span>¬© 2026 PharmaFlow</span>
                    </div>
                </t>

                <!-- PAGE MEDICINES -->
                <t t-if="state.menu === 'medicines'">
                    <div class="page-header">
                        <div>
                            <div class="page-title">Gestion des M√©dicaments</div>
                            <div class="page-subtitle">G√©rez votre inventaire et surveillez les stocks.</div>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-outline">Exporter CSV</button>
                            <button class="btn btn-primary" t-on-click="openMedicineForm">+ Ajouter M√©dicament</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Inventaire Complet</div>
                                <div class="card-subtitle" t-out="'Nombre total: ' + state.product_lst.length + ' articles'"/>
                            </div>
                        </div>
                        <table class="data-table" style="width:100%;">
                            <thead>
                                <tr>
                                    <th>Produit</th>
                                    <th>Stock</th>
                                    <th>Prix</th>
                                    <th>Cat√©gorie</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="state.product_lst.slice(0, 10)" t-as="prod" t-key="prod.id">
                                    <tr>
                                        <td><span class="prod-name" t-out="prod.name"/></td>
                                        <td><span class="mono" t-out="(prod.qty_available or 0).toFixed(0)"/></td>
                                        <td><span class="mono" t-out="(prod.list_price or 0).toFixed(2)"/> ‚Ç¨</td>
                                        <td><span class="cat-badge">M√©dicament</span></td>
                                        <td>
                                            <t t-if="(prod.qty_available or 0) === 0">
                                                <span class="cat-badge" style="background:var(--red-pale);color:var(--red);border-color:var(--red);">Rupture</span>
                                            </t>
                                            <t t-elif="(prod.qty_available or 0) &lt; 10">
                                                <span class="cat-badge" style="background:var(--orange-pale);color:var(--orange);border-color:var(--orange);">Faible</span>
                                            </t>
                                            <t t-else="">
                                                <span class="cat-badge" style="background:#EAF5EA;color:#2E7D32;border-color:#2E7D32;">OK</span>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </t>

                <!-- PAGE VACCINES -->
                <t t-if="state.menu === 'vaccines'">
                    <div class="page-header">
                        <div>
                            <div class="page-title">Module Vaccins</div>
                            <div class="page-subtitle">Gestion des stocks sensibles et cha√Æne du froid.</div>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-primary" t-on-click="openVaccineForm">+ Ajouter Vaccin</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Inventaire Vaccins</div>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Vaccin</th>
                                    <th>Stock</th>
                                    <th>Conservation</th>
                                    <th>Expiration</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="state.vaccine.slice(0, 5)" t-as="vacc" t-key="vacc.id">
                                    <tr>
                                        <td><span class="prod-name" t-out="vacc.name"/></td>
                                        <td><span class="mono" t-out="(vacc.qty_available or 0).toFixed(0)"/></td>
                                        <td>üå°Ô∏è 2-8¬∞C</td>
                                        <td>Active</td>
                                        <td><span class="cat-badge" style="background:#EAF5EA;color:#2E7D32;border-color:#2E7D32;">Disponible</span></td>
                                    </tr>
                                </t>
                                <t t-if="state.vaccine.length === 0">
                                    <tr><td colspan="5" style="text-align:center;padding:20px;color:var(--muted);">Aucun vaccin</td></tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </t>

                <!-- PAGE SUPPLIERS -->
                <t t-if="state.menu === 'suppliers'">
                    <div class="page-header">
                        <div>
                            <div class="page-title">Commandes Fournisseurs</div>
                            <div class="page-subtitle">Suivi des approvisionnements en temps r√©el.</div>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-outline" t-on-click="openSupplierForm">+ Ajouter Fournisseur</button>
                            <button class="btn btn-primary" t-on-click="openOrderForm">+ Nouvelle Commande</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Commandes en cours</div>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Fournisseur</th>
                                    <th>Date Pr√©vue</th>
                                    <th>Montant</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="state.order_data.slice(0, 5)" t-as="order" t-key="order.id">
                                    <tr>
                                        <td><span class="prod-name" t-out="order.partner_id ? order.partner_id[1] : '-'"/></td>
                                        <td><t t-out="order.create_date ? order.create_date.substring(0, 10) : '-'"/></td>
                                        <td><span class="mono"><t t-out="state.currency"/><t t-out="(order.amount_total or 0).toFixed(2)"/></span></td>
                                        <td><span class="cat-badge">Confirm√©</span></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </t>

            </div>
        </main>

    </div>

    <!-- MODALS FOR FORMS -->
    
    <!-- Medicine Form Modal -->
    <div class="modal" t-if="state.showMedicineForm" style="display:flex;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:100;align-items:center;justify-content:center;">
        <div class="modal-content" style="background:white;border-radius:8px;padding:30px;width:500px;max-height:90vh;overflow-y:auto;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                <h2 style="margin:0;font-size:20px;">Ajouter un M√©dicament</h2>
                <button class="btn-close" t-on-click="closeMedicineForm" style="background:none;border:none;font-size:24px;cursor:pointer;">√ó</button>
            </div>
            <form t-on-submit.prevent="createMedicine" style="display:flex;flex-direction:column;gap:15px;">
                <div style="text-align:center;">
                    <div style="width:100px;height:100px;margin:0 auto 15px;border:2px dashed #ddd;border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden;background:#f9f9f9;">
                        <img t-if="state.medicineForm.imagePreview" t-att-src="state.medicineForm.imagePreview" style="width:100%;height:100%;object-fit:cover;"/>
                        <span t-else="" style="color:#999;font-size:12px;text-align:center;">Pas d'image</span>
                    </div>
                    <label style="display:inline-block;padding:8px 16px;background:#0D9E8A;color:white;border-radius:4px;cursor:pointer;font-size:13px;font-weight:500;">
                        üì∑ Ajouter Photo
                        <input type="file" accept="image/*" t-on-change="handleMedicineImageUpload" style="display:none;"/>
                    </label>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Nom du M√©dicament</label>
                    <input type="text" t-model="state.medicineForm.name" placeholder="Parac√©tamol 500mg" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Cat√©gorie</label>
                    <select t-model="state.medicineForm.category" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        <option value="">S√©lectionner une cat√©gorie</option>
                        <option value="analgesique">Analg√©sique</option>
                        <option value="antibiotique">Antibiotique</option>
                        <option value="antitussif">Antitussif</option>
                        <option value="digestif">Digestif</option>
                    </select>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Prix Unitaire (‚Ç¨)</label>
                    <input type="number" step="0.01" t-model.number="state.medicineForm.price" placeholder="2.50" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Quantit√© Initiale</label>
                    <input type="number" t-model.number="state.medicineForm.quantity" placeholder="100" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Description</label>
                    <textarea t-model="state.medicineForm.description" placeholder="Description du m√©dicament..." style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;min-height:80px;"></textarea>
                </div>
                <div style="display:flex;gap:10px;margin-top:10px;">
                    <button type="button" class="btn btn-outline" t-on-click="closeMedicineForm" style="flex:1;">Annuler</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Cr√©er M√©dicament</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Vaccine Form Modal -->
    <div class="modal" t-if="state.showVaccineForm" style="display:flex;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:100;align-items:center;justify-content:center;">
        <div class="modal-content" style="background:white;border-radius:8px;padding:30px;width:500px;max-height:90vh;overflow-y:auto;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                <h2 style="margin:0;font-size:20px;">Ajouter un Vaccin</h2>
                <button class="btn-close" t-on-click="closeVaccineForm" style="background:none;border:none;font-size:24px;cursor:pointer;">√ó</button>
            </div>
            <form t-on-submit.prevent="createVaccine" style="display:flex;flex-direction:column;gap:15px;">
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Nom du Vaccin</label>
                    <input type="text" t-model="state.vaccineForm.name" placeholder="COVID-19 Pfizer" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Fabricant</label>
                    <input type="text" t-model="state.vaccineForm.manufacturer" placeholder="Pfizer" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Prix Unitaire (‚Ç¨)</label>
                    <input type="number" step="0.01" t-model.number="state.vaccineForm.price" placeholder="5.00" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Quantit√© Initiale</label>
                    <input type="number" t-model.number="state.vaccineForm.quantity" placeholder="50" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Temp√©rature de Conservation</label>
                    <input type="text" t-model="state.vaccineForm.storage_temp" placeholder="2-8¬∞C" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Date d'Expiration</label>
                    <input type="date" t-model="state.vaccineForm.expiration_date" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div style="display:flex;gap:10px;margin-top:10px;">
                    <button type="button" class="btn btn-outline" t-on-click="closeVaccineForm" style="flex:1;">Annuler</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Cr√©er Vaccin</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Supplier Form Modal -->
    <div class="modal" t-if="state.showSupplierForm" style="display:flex;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:100;align-items:center;justify-content:center;">
        <div class="modal-content" style="background:white;border-radius:8px;padding:30px;width:500px;max-height:90vh;overflow-y:auto;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                <h2 style="margin:0;font-size:20px;">Ajouter un Fournisseur</h2>
                <button class="btn-close" t-on-click="closeSupplierForm" style="background:none;border:none;font-size:24px;cursor:pointer;">√ó</button>
            </div>
            <form t-on-submit.prevent="createSupplier" style="display:flex;flex-direction:column;gap:15px;">
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Nom du Fournisseur</label>
                    <input type="text" t-model="state.supplierForm.name" placeholder="Pharma Distribution SARL" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Email</label>
                    <input type="email" t-model="state.supplierForm.email" placeholder="contact@pharma.fr" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">T√©l√©phone</label>
                    <input type="tel" t-model="state.supplierForm.phone" placeholder="+33 1 23 45 67 89" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Adresse</label>
                    <textarea t-model="state.supplierForm.address" placeholder="123 rue de la Paix, 75000 Paris" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;min-height:60px;"></textarea>
                </div>
                <div style="display:flex;gap:10px;margin-top:10px;">
                    <button type="button" class="btn btn-outline" t-on-click="closeSupplierForm" style="flex:1;">Annuler</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Cr√©er Fournisseur</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Purchase Order Form Modal -->
    <div class="modal" t-if="state.showOrderForm" style="display:flex;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:100;align-items:center;justify-content:center;">
        <div class="modal-content" style="background:white;border-radius:8px;padding:30px;width:500px;max-height:90vh;overflow-y:auto;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                <h2 style="margin:0;font-size:20px;">Cr√©er Commande Fournisseur</h2>
                <button class="btn-close" t-on-click="closeOrderForm" style="background:none;border:none;font-size:24px;cursor:pointer;">√ó</button>
            </div>
            <form t-on-submit.prevent="createPurchaseOrder" style="display:flex;flex-direction:column;gap:15px;">
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Fournisseur</label>
                    <select t-model="state.orderForm.supplier_id" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        <option value="">S√©lectionner un fournisseur</option>
                        <t t-foreach="state.order_data" t-as="supp" t-key="supp.id">
                            <option t-att-value="supp.partner_id[0]" t-out="supp.partner_id[1]"/>
                        </t>
                    </select>
                </div>
                <div>
                    <label style="display:block;margin-bottom:5px;font-weight:500;">Date de Livraison Pr√©vue</label>
                    <input type="date" t-model="state.orderForm.delivery_date" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"/>
                </div>
                <div style="border:1px solid #ddd;border-radius:4px;padding:15px;">
                    <h4 style="margin:0 0 10px 0;">Articles √† Commander</h4>
                    <t t-foreach="state.product_lst.slice(0, 5)" t-as="prod" t-key="prod.id">
                        <div style="display:flex;gap:10px;margin-bottom:10px;align-items:center;">
                            <input type="number" placeholder="Qty" min="0" style="width:60px;padding:8px;border:1px solid #ddd;border-radius:4px;"/>
                            <span style="flex:1;" t-out="prod.name"/>
                            <span class="mono" t-out="prod.list_price.toFixed(2) + ' ‚Ç¨'"/>
                        </div>
                    </t>
                </div>
                <div style="display:flex;gap:10px;margin-top:10px;">
                    <button type="button" class="btn btn-outline" t-on-click="closeOrderForm" style="flex:1;">Annuler</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Cr√©er Commande</button>
                </div>
            </form>
        </div>
    </div>

</t>

</templates>
